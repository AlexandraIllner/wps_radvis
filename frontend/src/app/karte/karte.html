@if (showMap) {
  <div class="karte">
    <div class="karte-body">
      <h3 class="karte-title">Teilen Sie Ihren Standort oder markieren Sie ihn auf der Karte</h3>

      @if (!hasLocation()) {
        <div class="radmelder-hinweis">
          <mat-icon class="hinweis-icon">info_outline</mat-icon>
          <span>Wählen Sie einen Standort aus oder verwenden Sie Ihren aktuellen Standort.</span>
        </div>
      }

      <mat-grid-list cols="2" rowHeight="5vh">
        <mat-grid-tile>
          <button mat-raised-button color="primary" (click)="sendLocation()">
            Standort senden
          </button>
        </mat-grid-tile>
        <mat-grid-tile>
          <button mat-raised-button color="primary" (click)="selectLocation()">
            Standort selbst wählen
          </button>
        </mat-grid-tile>
      </mat-grid-list>

      <button
        mat-raised-button
        style="margin-bottom: 3%"
        color="primary"
        (click)="useCurrentLocation()"
      >
        Aktuellen Standort verwenden
      </button>

      <!-- Map -->
      <div
        leaflet
        [leafletOptions]="options"
        (leafletMapReady)="onMapReady($event)"
        style="height: 400px; width: 100%"
      ></div>

      @if (hasLocation()) {
        <div class="success-box">
          ✓ Standort ausgewählt: {{ formattedLat }}, {{ formattedLng }}
        </div>
      }

    </div>
  </div>
}
